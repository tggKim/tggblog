<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/bootstrap.css">
    <link rel="icon" href="data:,">
    <title>메인</title>
    <style>
        h1 {
           text-align: center;  /* h1 가로 중앙 정렬 */
        }
        table {
            border-collapse: collapse; /* 중복된 테두리를 하나로 합침 */
        }

        th, td {
            border-top: 1px solid black;  /* 셀 위쪽 테두리 */
            border-bottom: 1px solid black; /* 셀 아래쪽 테두리 */
            padding: 10px;
        }

        th {
            border-top: 2px solid black;
            border-bottom: 2px solid black; /* 헤더 셀 아래쪽 테두리를 더 두껍게 */
        }
    </style>
    <script>
        function confirmSubmit() {
            return confirm("로그아웃 하시겠습니까?"); // 확인 창을 띄우고 '확인'을 누르면 true, '취소'를 누르면 false
        }
    </script>
</head>
<body style="margin : 20px">
<h1>
    <span>어서오세요! </span>
    <span sec:authorize="isAuthenticated()" th:text="${user.nickname}"></span>
    <img sec:authorize="isAuthenticated()" th:src="@{/image/{savedFilename}(savedFilename=${user.savedFilename})}" width="70" height="70" style="position: absolute; right: 10px; top: 8px;"/>
</h1>
<hr>

<div style="display: flex; justify-content: space-between;">
    <button type="button" class="btn btn-primary" th:onclick="|location.href='@{/}'|">전체 글</button>

    <form th:action="@{/logout}" method="get" style="text-align:right;  display: inline-block; " onsubmit="return confirmSubmit();">
        <button sec:authorize="isAnonymous()" th:onclick="|location.href='@{/login}'|" type="button" class="btn btn-primary">로그인</button>
        <button sec:authorize="isAnonymous()" th:onclick="|location.href='@{/signup}'|" type="button" class="btn btn-primary">회원 가입</button>
        <button sec:authorize="isAuthenticated()" type="button" class="btn btn-primary">포스트 작성</button>
        <button sec:authorize="isAuthenticated()" th:onclick="|location.href='@{/user}'|" type="button" class="btn btn-primary">유저 정보</button>
        <button sec:authorize="isAuthenticated()" type="submit" class="btn btn-primary">로그아웃</button>
    </form>
</div>

<br>

<table style="width: 100%; text-align:center;" class="table table-striped">
    <colgroup>
        <col style="width: 70%;"> <!-- 제목 열 -->
        <col style="width: 10%;"> <!-- 유저명 열 -->
        <col style="width: 10%;"> <!-- 생성 날짜 열 -->
        <col style="width: 10%;"> <!-- 조회수 열 -->
    </colgroup>
    <thead>
    <tr>
        <th>제목</th>
        <th>유저명</th>
        <th>생성 날짜</th>
        <th>조회수</th>
    </tr>
    </thead>
    <!--/*/
    <tbody>
    <tr th:each = "post : ${posts}" >
        <td><a th:href="@{/post/{id}(id = ${post.postId}, page = ${posts.number})}" th:text = "${post.title}">제목</a></td>
        <td><a th:href="@{/post/{id}(id = ${post.postId}, page = ${posts.number})}" th:text = "${post.nickname}">유저명</a></td>
        <td><a th:href="@{/post/{id}(id = ${post.postId}, page = ${posts.number})}"  th:text = "${#temporals.format(post.createTime, 'yyyy.MM.dd HH:mm')}">생성 날짜</a></td>
        <td><a th:href="@{/post/{id}(id = ${post.postId}, page = ${posts.number})}" th:text = "${post.viewCount}">조회수</a></td>
    </tr>
    </tbody>
    /*/-->
</table>
</body>
</html>